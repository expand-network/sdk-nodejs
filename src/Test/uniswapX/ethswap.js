// const {sendTransaction} = require("expand-network");
const {  signTransaction, prepareTransaction, sendTransaction } = require('../../index');
// const { privateKey } = require('./privatekey');
const xApiKey = 'vF2rU96xCr9yJCgSVnSxR9yKOBd1U21z9jYcFb5T';
async function main() {
    const txObject =  {
        "dexId": "1901",
        "from": "0xa67E9B68c41b0f26184D64C26e0b2B81466E5994",
        "gas": "273376",
        "gasPriority":"low",
        "signature": "0xd9e98ecd268efa38970eb8a732617806bc031b2cee1bb3eacd30d6f8e5a563be63042884df5f1a97ded227302dfd6acbbaf8659d9a13afd5a44b5dcf33e709ee1c",
        "serializedOrder": "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000006556174c0000000000000000000000000000000000000000000000000000000065eeadcc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0c9275e44ea80ef17579d33c55136b7da269aeb00000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000002000000000000000000000000006000da47483062a0d734ba3dc7576ce6a0b645c4000000000000000000000000a67e9b68c41b0f26184d64c26e0b2b81466e59940000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000006b0c82c8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000dfcea9088c8a88a76ff74892c1457c17dfeef9c1000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000a67e9b68c41b0f26184d64c26e0b2b81466e5994",
        "xApiKey": "vF2rU96xCr9yJCgSVnSxR9yKOBd1U21z9jYcFb5T"
            
        };

    const rawtx = await prepareTransaction('http://localhost:3000/dex/swap', txObject);
    console.log(rawtx);
    const privateKey = 'a10916eb80bd5af3b1cc3c12ae03a8e9f9aef8442b9b306640fa5cb98f641a86';
    const chainId = '5';
    const raw = await signTransaction(rawtx,{
        chainId,
        xApiKey,
        privateKey,
    });
    console.log(raw,'------>');
    raw.xApiKey = 'vF2rU96xCr9yJCgSVnSxR9yKOBd1U21z9jYcFb5T';
    raw.chainId = '5';
    const x = await sendTransaction(raw);
    console.log(x);
}
    
main();